<article>
  <script id="affosuca" type="text/javascript" src="scripts/sim-live.js"></script>
  <template id="live-template" is="auto-binding">
    <div id="loader">
      <paper-spinner active></paper-spinner>
    </div>
    <div id="no-running-msg">
      <h1 flex>No running simulation</h1>
    </div>
    <div id="sim-live" horizontal layout wrap>
      <template repeat="{{proxy in proxies}}">
        <core-header-panel mode="seamed" flex>
          <div class="proxy-toolbar core-header" id="toolbar{{proxy.id}}">
            <div horizontal layout center id="proxy-toolbar-top">
              <core-icon icon="dns"></core-icon>
              <span flex center>{{proxy.val.address}}</span>
              <span>{{proxy.val.type}}</span>
            </div>
            <paper-progress class="red" value="{{progress.current}}" max="{{progress.max}}"></paper-progress>
          </div>

          <div class="content" horizontal layout center-justified>
            <div vertical layout>
              <base-card>
                <core-toolbar class="card-tool">
                  <core-icon icon="info-outline"></core-icon>
                  <span flex>General Info</span>
                </core-toolbar>
                <div class="card-content">
                  <section flex horizontal wrap layout>
                    <template repeat="{{info in infos}}">
                      <core-item class="info-item" label="{{info.label}}" icon="{{info.icon}}" flex auto>
                        <span class="info-val"> {{info.val}}</span>
                      </core-item>
                    </template>
                  </section>
                </div>
              </base-card>
              <base-card class="chart-card">
                <core-toolbar class="card-tool">
                  <core-icon icon="trending-up"></core-icon>
                  <span flex>Average Metrics</span>
                </core-toolbar>
                <div class="card-content">
                  <chart-js id="line-chart{{proxy.id}}" dataLimit="10" initData="{{lineChartInitData}}" chartType="line"></chart-js>
                </div>
              </base-card class="chart-card">
              <base-card class="chart-card">
                <core-toolbar class="card-tool">
                  <core-icon icon="trending-up"></core-icon>
                  <paper-dropdown-menu>
                    <paper-dropdown class="dropdown">
                      <core-menu id="metric-sel" selected="{{metrics.selected}}" valueattr="value" class="menu" on-core-select="{{changeBarMetric()}}">
                        <template repeat="{{option in metrics.options}}">
                          <paper-item value="{{option.id}}">{{option.name}}</paper-item>
                        </template>
                      </core-menu>
                    </paper-dropdown>
                  </paper-dropdown-menu>
                </core-toolbar>
                <div class="card-content">
                  <chart-js id="bar-chart{{proxy.id}}" initData="{{barChartInitData}}" chartType="bar"></chart-js>
                </div>
              </base-card class="chart-card">
              <base-card>
                <core-toolbar class="card-tool">
                  <core-icon icon="info-outline"></core-icon>
                  <span flex>Architecture</span>
                </core-toolbar>
                <div class="card-content">
                  <section flex horizontal wrap layout>
                    <template repeat="{{cmp in proxy.val.architecture}}">
                      <div class="cmp-info" layout vertical>
                        <core-item class="cmp-info-item font-scalable small" icon="dns" flex auto>
                          <span class="cmp-info-val">{{cmp.hostname}}</span>
                        </core-item>
                        <core-item class="cmp-info-item font-scalable small" label="Ip:" flex auto>
                          <span class="cmp-info-val">{{cmp.address}}</span>
                        </core-item>
                        <core-item class="cmp-info-item font-scalable small" label="Vcpus:" flex auto>
                          <span class="cmp-info-val">{{cmp.vcpus}}</span>
                        </core-item>
                        <core-item class="cmp-info-item font-scalable small" label="Disk:" flex auto>
                          <span class="cmp-info-val">{{cmp.local_gb}}</span>
                        </core-item>
                        <core-item class="cmp-info-item font-scalable small" label="Ram:" flex auto>
                          <span class="cmp-info-val">{{cmp.memory_mb}}</span>
                        </core-item>
                      </div>
                    </template>
                  </section>
                </div>
              </base-card>
            </div>
          </div>
        </core-header-panel>
      </template>
    </div>
  </template>
</article>
